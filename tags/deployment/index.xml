<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Deployment on Adam.Blog()</title>
    <link>http://adampresley.com/tags/deployment/</link>
    <description>Recent content in Deployment on Adam.Blog()</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 14 Dec 2014 19:51:00 +0000</lastBuildDate>
    <atom:link href="http://adampresley.com/tags/deployment/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Deploying My First Go Application to Heroku</title>
      <link>http://adampresley.com/post/deploying-my-first-go-application-to-heroku/</link>
      <pubDate>Sun, 14 Dec 2014 19:51:00 +0000</pubDate>
      
      <guid>http://adampresley.com/post/deploying-my-first-go-application-to-heroku/</guid>
      <description>

&lt;p&gt;For the last week or so I&amp;rsquo;ve been converting a site I manage from WordPress to a simple Go application. There are three reasons I want to do this.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;WordPress has been extreme overkill for what I actually need&lt;/li&gt;
&lt;li&gt;Performance. WordPress on a shared host is just not fast enough for what I deem to be a super simple site&lt;/li&gt;
&lt;li&gt;I wanted to build something other than a server-style application in Go and I really enjoy writing Go code!&lt;/li&gt;
&lt;/ol&gt;

&lt;!-- excerpt --&gt;

&lt;p&gt;With these points in mind I set out to write the site using Go, the standard template library that comes with Go&amp;rsquo;s standard library, and Gorilla Mux for better routing setup. I did end up building a little bit of structure to support pre-loading layout files, and also implemented some great examples I found demonstrating how one can setup variable placeholders for insertion into a layout HTML file. But for the most part I kept the application fairly simple. I also found the need for a basic &amp;ldquo;session&amp;rdquo; management, and this is where one might think Go&amp;rsquo;s standard library is lacking. It did not take long to find a simple session management library by the same people that do the Gorilla Muxer, which can be found &lt;a href=&#34;https://github.com/gorilla/sessions&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Once the app was complete and working to my satisfaction I started looking around for what options I might have to deploy this to the wild. I know I could buy a VPS, or even continue using Amazon EC2, but I found that Heroku allows Go applications with the entry-level free offering. Immediately curious I started searching for what it would take to deploy my application to Heroku. Mark McGranaghan has a great &lt;a href=&#34;https://mmcgrana.github.io/2012/09/getting-started-with-go-on-heroku.html&#34;&gt;guide to deploying your first Go app to Heroku&lt;/a&gt; which I followed along with. There are a couple of &lt;em&gt;gotchas&lt;/em&gt; I ran into, however, and I will catalog them here in the event that anyone else having these troubles comes looking for answers.&lt;/p&gt;

&lt;p&gt;My application crashed when trying to start, or when trying to serve the first request. Here are the items that I had to adjust to make sure my application was Go friendly. Note that this is &lt;em&gt;on top&lt;/em&gt; of what Mark&amp;rsquo;s article steps you through.&lt;/p&gt;

&lt;h4 id=&#34;sigint-handler:e06b992f5f879233239c07b2637ed4e4&#34;&gt;SIGINT Handler&lt;/h4&gt;

&lt;p&gt;I often put a SIGINT handler in my applications. SIGINT is a signal that a OS can send to your application that signals an interrupt. On the console CTRL+C will send your application a SIGINT. When you think about it a managed cloud environment does not need this. I noted that Heroku will happily sent a SIGKILL to my application when it was not behaving as desired.&lt;/p&gt;

&lt;h4 id=&#34;port-environment-variable:e06b992f5f879233239c07b2637ed4e4&#34;&gt;PORT Environment Variable&lt;/h4&gt;

&lt;p&gt;Mark&amp;rsquo;s example shows the Go application binding to an environment variable named &lt;strong&gt;PORT&lt;/strong&gt;. I often have an optional flag to specify port, and default it to something like &lt;em&gt;8080&lt;/em&gt;. Turns out that this is not optional for Heroku. It will set this environment variable at startup time and your app must respect it.&lt;/p&gt;

&lt;h4 id=&#34;binding-to-a-specific-ip:e06b992f5f879233239c07b2637ed4e4&#34;&gt;Binding To a Specific IP&lt;/h4&gt;

&lt;p&gt;My application was binding to &lt;strong&gt;localhost&lt;/strong&gt; explicitly. This is a no-no with Heroku. Instead use something like this: &lt;strong&gt;fmt.Sprintf(&amp;rdquo;:%s&amp;rdquo;, os.Getenv(&amp;ldquo;PORT&amp;rdquo;))&lt;/strong&gt;, which will bind to available IP address. In other words, Heroku manages this, and your application needs to let it do its thing.&lt;/p&gt;

&lt;h3 id=&#34;results:e06b992f5f879233239c07b2637ed4e4&#34;&gt;Results&lt;/h3&gt;

&lt;p&gt;I am very happy with the results. Even on the free Heroku tier I&amp;rsquo;m finding the Go version of this site&amp;rsquo;s requests run in half the time of the WordPress version running on shared hosting. To see it in action (for now), visit &lt;a href=&#34;https://clearbrookband.herokuapp.com&#34;&gt;https://clearbrookband.herokuapp.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Cheers, and happy coding!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>My First Experience with Fabric and Amazon EC2</title>
      <link>http://adampresley.com/post/my-first-experience-with-fabric-and-amazon-ec2/</link>
      <pubDate>Wed, 17 Oct 2012 13:03:00 +0000</pubDate>
      
      <guid>http://adampresley.com/post/my-first-experience-with-fabric-and-amazon-ec2/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been working on a few projects and I have been in the process of
moving them to Amazon EC2. Up until this point I have been writing Bash
shell scripts, connecting to my servers and EC2 instances via SSH, then
running the shell scripts manually. Then I learned about &lt;a href=&#34;http://docs.fabfile.org/&#34;&gt;Fabric&lt;/a&gt;, and
I wish I had seen this sooner. Fabric is a command-line tool and Python
library for executing local and remote shell commands. Fabric can also
connect to remote servers over SSH and execute commands. This basically
renders me antique. :) I&amp;rsquo;m OK with this. In my setup I have a deployment
key on each EC2 instance that is used to checkout the Git repository.
This repository is the home of the web application. From here I would
usually update a file named &lt;strong&gt;config.py&lt;/strong&gt; to turn off &lt;em&gt;Debug&lt;/em&gt; which has
my application bind to a different port, etc&amp;hellip; I also run a script
named &lt;strong&gt;bundle.py&lt;/strong&gt; that takes all my CSS and JS files, combines and
minifies them, then changes the includes in the main layout template to
point to these files instead of the individual ones. Now, however, I can
automate those tasks with a single command using Fabric.&lt;/p&gt;

&lt;p&gt;Below is an example of how I am using Fabric and Boto (for Amazon) to
iterate over my EC2 instances, reset the repository (undoing all local
changes), pull down the latest code, fix the config file and bundle.&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;__future__&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;with_statement&lt;/span&gt;

&lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;fabric&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;boto&lt;/span&gt;
&lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;boto.ec2&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;time&lt;/span&gt;
&lt;span style=&#34;color: #f92672&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;fabric.api&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt;
&lt;span style=&#34;color: #f92672&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;fabric.colors&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;green,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow&lt;/span&gt;
&lt;span style=&#34;color: #f92672&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;boto.ec2.connection&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;EC2Connection&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;ACCESS_KEY_ID&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;PUT YOUR KEY HERE&amp;quot;&lt;/span&gt;
&lt;span style=&#34;color: #f8f8f2&#34;&gt;SECRET_ACCESS_KEY&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;PUT YOUR ACCESS KEY HERE&amp;quot;&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;REPOS&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;/path/to/repo&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;origin&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;master&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color: #f8f8f2&#34;&gt;]&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_connect&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;EC2Connection(ACCESS_KEY_ID,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;SECRET_ACCESS_KEY)&lt;/span&gt;

&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_getInstances&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;connection&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;_connect()&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;reservations&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;connection&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;get_all_instances()&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;instances&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[]&lt;/span&gt;

    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;green(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;** Getting instances **&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color: #66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;reservation&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;reservations:&lt;/span&gt;
        &lt;span style=&#34;color: #66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;instance&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;reservation&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;instances:&lt;/span&gt;
            &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Instance: %s (%s) @ %s&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;(instance&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;id,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;instance&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;state,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;instance&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;public_dns_name)&lt;/span&gt;
            &lt;span style=&#34;color: #f8f8f2&#34;&gt;instances&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;append(instance&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;public_dns_name)&lt;/span&gt;

    &lt;span style=&#34;color: #66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;instances&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_gitReset&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Resetting repository...&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;run(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;cd %s &amp;amp;&amp;amp; git checkout -f&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;repo)&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_gitPull&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Updating code...&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;run(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;cd %s &amp;amp;&amp;amp; git pull %s %s&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;(env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;repo,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;parent,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;branch))&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_fixConfigFile&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Updating config file...&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;run(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;sed -i &amp;#39;s/DEBUG\s=\sTrue/DEBUG = False/g&amp;#39; /path/to/repo/config.py&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;_bundle&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Bundling...&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;run(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;cd /path/to/repo/bin &amp;amp;&amp;amp; python ./bundle.py&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;production&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;hosts&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[]&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;ubuntu&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;key_filename&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;super-secret-key-pair-file.pem&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;]&lt;/span&gt;

    &lt;span style=&#34;color: #75715e&#34;&gt;#&lt;/span&gt;
    &lt;span style=&#34;color: #75715e&#34;&gt;# Get the DNS addresses for all the instances on this account&lt;/span&gt;
    &lt;span style=&#34;color: #75715e&#34;&gt;#&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;hosts&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;_getInstances()&lt;/span&gt;


&lt;span style=&#34;color: #66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;updateServers&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;():&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;require(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;hosts&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;provided_by&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;production&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;])&lt;/span&gt;

    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;green(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;** Updating Servers **&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt;

    &lt;span style=&#34;color: #66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;repo,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;parent,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;branch&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;REPOS:&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;repo&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;repo&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;parent&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;parent&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;env&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;branch&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;branch&lt;/span&gt;

        &lt;span style=&#34;color: #66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;yellow(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;%s at %s/%s&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;(repo,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;parent,&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;branch))&lt;/span&gt;

        &lt;span style=&#34;color: #f8f8f2&#34;&gt;_gitReset()&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;_gitPull()&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;_fixConfigFile()&lt;/span&gt;
        &lt;span style=&#34;color: #f8f8f2&#34;&gt;_bundle()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

</description>
    </item>
    
  </channel>
</rss>