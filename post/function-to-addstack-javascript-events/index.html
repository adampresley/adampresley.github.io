<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Adam.Blog()</title>
        <meta name="author">
        <meta name="description" content="I&#39;m bringin&#39; nerdy back">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.16-DEV" />
          <link href="http://adampresley.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Adam.Blog()" />
          <link href="http://adampresley.com/post/index.xml" rel="feed" type="application/rss+xml" title="Adam.Blog()" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://adampresley.com/css/styles.css">
        <link rel="icon" href="http://adampresley.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://adampresley.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://adampresley.com/css/highlightjs/monokai.css">
        <script src="http://adampresley.com/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://adampresley.com/assets/images/code-background-screenshot.png);
        }}
       .site-header {
         background: #2a373d url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Adam.Blog()</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://adampresley.com/" title="">&laquo; </a>
            
<h1><a href="http://adampresley.com/post/function-to-addstack-javascript-events/" title="Function to Add/Stack JavaScript Events">Function to Add/Stack JavaScript Events</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2010.09.10">2010.09.10</time>

    &middot; 
        
        <a href="http://adampresley.com/tags/development">development</a>, 
        
        <a href="http://adampresley.com/tags/javascript">javascript</a>
        
    

</span>
</footer>

            <p>I&rsquo;m in the process of modifying pages in a ColdFusion application where
I do not have the option of plugging in jQuery. ExtJs is available in
certain parts of the application, but getting it in others is not always
an option. As such I needed to attach additional click events to buttons
on a form that may already have an existing click event. As such I
needed a quick way to add a new one without overwriting the old click
event.</p>

<p>To do this I first created a namespace to put my new method into so I
don&rsquo;t trample on any existing implementation. I will call this namespace
&ldquo;mine&rdquo;. :) Then I crafted a function to add events to an element. I
wanted this method to be pretty versatile, and it needs the element to
attach the event to, the name of the event, a handler, and an optional
scope argument. The handler just needs to be a method to call when the
event fires. The scope argument is so you can override what scope the
handler is called against. This is useful if you need the handler to
execute in the scope of another object or function. I also wanted the
ability to pass in the element as either a string name, or the actual
element object. Let&rsquo;s look at the code.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">mine</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">mine</span> <span style="color: #f92672">||</span> <span style="color: #f8f8f2">{};</span>

<span style="color: #75715e">/**</span>
<span style="color: #75715e"> * Add an event handler. Will check to see if there are</span>
<span style="color: #75715e"> * already existing event handlers registered, and if so</span>
<span style="color: #75715e"> * will execute them.</span>
<span style="color: #75715e"> * @author Adam Presley</span>
<span style="color: #75715e"> * @param el DOM element or string of DOM element name</span>
<span style="color: #75715e"> * @param handler A function to execute when the click event occurs</span>
<span style="color: #75715e"> * @param scope The scope in which to execute this handler. The default</span>
<span style="color: #75715e"> *    is to execute in the scope of the DOM element</span>
<span style="color: #75715e"> */</span>
<span style="color: #a6e22e">mine</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">addEvent</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">el</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">eventName</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">handler</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">scope</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
   <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">o</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">typeof</span> <span style="color: #a6e22e">el</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;object&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">?</span> <span style="color: #a6e22e">el</span> <span style="color: #f92672">:</span> <span style="color: #f8f8f2">document.</span><span style="color: #a6e22e">getElementById</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">el</span><span style="color: #f8f8f2">);</span>
   <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">currentEvent</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">o</span><span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;on&quot;</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">eventName</span><span style="color: #f8f8f2">])</span> <span style="color: #f92672">||</span> <span style="color: #66d9ef">undefined</span><span style="color: #f8f8f2">;</span>

   <span style="color: #75715e">/*</span>
<span style="color: #75715e">    * Assign the onclick event.</span>
<span style="color: #75715e">    */</span>
   <span style="color: #a6e22e">o</span><span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;on&quot;</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">eventName</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">currentEvent</span> <span style="color: #f92672">!==</span> <span style="color: #66d9ef">undefined</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
         <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">scope</span> <span style="color: #f92672">===</span> <span style="color: #66d9ef">undefined</span><span style="color: #f8f8f2">)</span> <span style="color: #a6e22e">currentEvent</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">call</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">o</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">e</span><span style="color: #f8f8f2">);</span>
         <span style="color: #66d9ef">else</span> <span style="color: #a6e22e">currentEvent</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">call</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">scope</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">e</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>

      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">scope</span> <span style="color: #f92672">===</span> <span style="color: #66d9ef">undefined</span><span style="color: #f8f8f2">)</span> <span style="color: #a6e22e">handler</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">call</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">o</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">e</span><span style="color: #f8f8f2">);</span>
      <span style="color: #66d9ef">else</span> <span style="color: #a6e22e">handler</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">call</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">scope</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">e</span><span style="color: #f8f8f2">);</span>
   <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>


<p>The very first thing of note is the declaration of <strong>mine</strong>. If it
is already defined use that, otherwise define a blank object. This is
our namespace that the <strong>addEvent</strong> method will be defined in.</p>

<p>Once inside the <strong>addEvent</strong> method the first order of business is
to get the DOM element. If you pass a string name into <strong>el</strong> it
will grab the element by ID for you. Otherwise if you pass in the DOM
element it just uses that. From here we then check to see if there is
already a registered event on this object based on the <strong>eventName</strong>
you pass in.</p>

<p>After this we assign a method to handle the requested event. If there
was already an event this new handler calls the old event so we can keep
existing event handlers. It then will call your newly passed in
<strong>handler</strong>. By default the passed in <strong>handler</strong> is called in
the scope of the DOM element, but you may override it if you wish. Here
is an example of calling this.</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">mine</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">addEvent</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;btnSubmit&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;click&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
   <span style="color: #a6e22e">alert</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;You clicked me!&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</p>

<p>In almost all cases I would recommend using a library that does all this
for you because they&rsquo;ve gone through the trouble of cross browser
testing and so on. However, when necessary it sure is handy to know how
to do this the old fashioned way. Happy coding!</p>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fadampresley.com%2fpost%2ffunction-to-addstack-javascript-events%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Function%20to%20Add%2fStack%20JavaScript%20Events&amp;url=http%3a%2f%2fadampresley.com%2fpost%2ffunction-to-addstack-javascript-events%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fadampresley.com%2fpost%2ffunction-to-addstack-javascript-events%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fadampresley.com%2fpost%2ffunction-to-addstack-javascript-events%2f&title=Function%20to%20Add%2fStack%20JavaScript%20Events" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'adampresleyblog';
    var disqus_identifier = 'http:\/\/adampresley.com\/post\/function-to-addstack-javascript-events\/';
    var disqus_title = 'Function to Add\/Stack JavaScript Events';
    var disqus_url = 'http:\/\/adampresley.com\/post\/function-to-addstack-javascript-events\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="http://adampresley.com/assets/adampresley/images/adam-bowtie.png" alt="Adam Presley" />
  <p class="name"> 
  <strong>Adam Presley</strong></p>
  <p class="address">Texas, USA</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/adampresley" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/adampresley" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://adampresley.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://adampresley.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2016 &middot; Adam Presley. All Rights Reserved. Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/adampresley.com\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://adampresley.com/js/plugins.js"></script>

<!-- Google Analytics -->
<script>
  var _gaq=[['_setAccount','UA-44927419-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

