<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Adam.Blog()</title>
        <meta name="author">
        <meta name="description" content="I&#39;m bringin&#39; nerdy back">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.16-DEV" />
          <link href="http://adampresley.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Adam.Blog()" />
          <link href="http://adampresley.com/post/index.xml" rel="feed" type="application/rss+xml" title="Adam.Blog()" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://adampresley.com/css/styles.css">
        <link rel="icon" href="http://adampresley.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://adampresley.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://adampresley.com/css/highlightjs/monokai.css">
        <script src="http://adampresley.com/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://adampresley.com/assets/images/code-background-screenshot.png);
        }}
       .site-header {
         background: #2a373d url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Adam.Blog()</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://adampresley.com/" title="">&laquo; </a>
            
<h1><a href="http://adampresley.com/post/finding-specific-text-in-a-string-using-coldfusion-and-java/" title="Finding Specific Text in a String using ColdFusion and Java">Finding Specific Text in a String using ColdFusion and Java</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2009.07.15">2009.07.15</time>

    &middot; 
        
        <a href="http://adampresley.com/tags/development">development</a>, 
        
        <a href="http://adampresley.com/tags/coldfusion">coldfusion</a>, 
        
        <a href="http://adampresley.com/tags/regex">regex</a>
        
    

</span>
</footer>

            <p>A question was posted on the Dallas/Ft. Worth ColdFusion User Group
today.</p>

<blockquote>
<p>I&rsquo;m trying to parse a text file to find a particular string, then
extract that string and approximately 100 characters past that.</p>
</blockquote>

<p>So I&rsquo;ve cooked up a little code sample that uses the Java regular
expressions classes. The ColdFusion regular expression methods are quite
nice, and will serve most purposes, but for tasks like this where I have
to run a regex pattern repeatedly speed is important. Especially if you
are working over a large file of data, for example.</p>

<p>So what I&rsquo;ve done is use the <strong>java.util.regex.Pattern</strong> class and the
<strong>java.util.regex.Matcher</strong> class to do the job. The <strong>Pattern</strong>
class allows you to compile a regular expression string you intend to
use over and over, as well as setup some options on how the regex engine
is to behave.</p>

<p>The <strong>Matcher</strong> class allows you to iteratively match the pattern
against a string, allowing you to find multiple matches, one at a time.
So what you do is ask the matcher if you have any more string to search,
and if you do, tell it to find the next match. If it finds a new match
you can retrieve information about what the start and end positions of
the match are, and more. So let&rsquo;s see that in action.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">haystack</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Hello. My name is Adam. It is nice to meet you. How are you? This is an example of a regex &quot;</span><span style="color: #f92672">&amp;</span>
<span style="color: #e6db74">&quot;that finds something specific as a string to start, then followed by 100 or so characters. How many &quot;</span><span style="color: #f92672">&amp;</span>
<span style="color: #e6db74">&quot;will we have? I am a giant noob who is writing lengthy text to try and see if we&#39;ve hit our &quot;</span><span style="color: #f92672">&amp;</span>
<span style="color: #e6db74">&quot;something specific threshold. Now we should have two matches.&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #75715e">&lt;!---</span>
<span style="color: #75715e">    Create the pattern. The compiled pattern</span>
<span style="color: #75715e">    needs to be case insensitive, and dot matches</span>
<span style="color: #75715e">    all.</span>

<span style="color: #75715e">    See: http://72.5.124.55/javase/6/docs/api/java/util/regex/Pattern.html</span>
<span style="color: #75715e">---&gt;</span>
<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">patternObj</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">createObject</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;java&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;java.util.regex.Pattern&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">matchStart</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;something\sspecific&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">pattern</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">patternObj.compile</span><span style="color: #f8f8f2">(</span>
    <span style="color: #e6db74">&quot;(#matchStart#.{1,100})&quot;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #a6e22e">bitor</span><span style="color: #f8f8f2">(patternObj.CASE_INSENSITIVE,</span> <span style="color: #f8f8f2">patternObj.DOTALL)</span>
<span style="color: #f8f8f2">)</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #75715e">&lt;!---</span>
<span style="color: #75715e">    Get a matcher object to match our pattern against</span>
<span style="color: #75715e">    our input.</span>
<span style="color: #75715e">---&gt;</span>
<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">matcher</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">pattern.matcher</span><span style="color: #f8f8f2">(haystack)</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #75715e">&lt;!---</span>
<span style="color: #75715e">    Continue matching till we have no more matches.</span>
<span style="color: #75715e">    When we find a match get the start, end, and value</span>
<span style="color: #75715e">    of the match.</span>
<span style="color: #75715e">---&gt;</span>
<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">local</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[]</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">index</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #f8f8f2">&lt;cfloop</span> <span style="color: #f8f8f2">condition</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;!matcher.hitEnd()&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;cfif</span> <span style="color: #a6e22e">matcher.find</span><span style="color: #f8f8f2">()&gt;</span>
        <span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">local[index]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">start</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">matcher.start</span><span style="color: #f8f8f2">(),</span>
            <span style="color: #f8f8f2">end</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">matcher.end</span><span style="color: #f8f8f2">(),</span>
            <span style="color: #f8f8f2">value</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">haystack.subsequence</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">matcher.start</span><span style="color: #f8f8f2">(),</span> <span style="color: #a6e22e">matcher.end</span><span style="color: #f8f8f2">())</span>
        <span style="color: #f8f8f2">}</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

        <span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #f8f8f2">index</span><span style="color: #f92672">++</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/cfif&gt;</span>
<span style="color: #f8f8f2">&lt;/cfloop&gt;</span>

<span style="color: #f8f8f2">&lt;cfdump</span> <span style="color: #66d9ef">var</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;#local#&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
</pre></div>


<p>As you can see at the beginning I am simply setting up a large string
with our data to search against. From here we create a pattern object,
followed by what our starting match criteria is. So the variable
<strong>matchStart</strong> is what string we wish to start the match with. From
here we use the <em>compile</em> method to compile the regular expression. In
this method the second argument is taking two integers,
CASE_INSENSITIVE and DOTALL and ORing the together. This tells the
pattern that we don&rsquo;t care about case, and the DOT character in the
regex matches all lines.</p>

<p>After this we ask the pattern for a matcher object, telling it also that
we wish to work against the haystack string. What we then do with it is
to loop until the matcher tells us we&rsquo;ve hit the end of our search
string, as seen on line 35.</p>

<p>The <em>find</em> method asks the matcher to search the haystack for our regex
match. If we have a successful match (because <em>find</em> returns boolean),
we want to get the start and end positions, as well as the matched
value, and stuff them into a structure, and place that structure into an
array.</p>

<p>From here you will have an array of matches, their start and end
offsets, that you may then use to your heart&rsquo;s content. Happy coding!</p>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fadampresley.com%2fpost%2ffinding-specific-text-in-a-string-using-coldfusion-and-java%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Finding%20Specific%20Text%20in%20a%20String%20using%20ColdFusion%20and%20Java&amp;url=http%3a%2f%2fadampresley.com%2fpost%2ffinding-specific-text-in-a-string-using-coldfusion-and-java%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fadampresley.com%2fpost%2ffinding-specific-text-in-a-string-using-coldfusion-and-java%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fadampresley.com%2fpost%2ffinding-specific-text-in-a-string-using-coldfusion-and-java%2f&title=Finding%20Specific%20Text%20in%20a%20String%20using%20ColdFusion%20and%20Java" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'adampresleyblog';
    var disqus_identifier = 'http:\/\/adampresley.com\/post\/finding-specific-text-in-a-string-using-coldfusion-and-java\/';
    var disqus_title = 'Finding Specific Text in a String using ColdFusion and Java';
    var disqus_url = 'http:\/\/adampresley.com\/post\/finding-specific-text-in-a-string-using-coldfusion-and-java\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="http://adampresley.com/assets/adampresley/images/adam-bowtie.png" alt="Adam Presley" />
  <p class="name"> 
  <strong>Adam Presley</strong></p>
  <p class="address">Texas, USA</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/adampresley" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/adampresley" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://adampresley.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://adampresley.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2016 &middot; Adam Presley. All Rights Reserved. Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/adampresley.com\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://adampresley.com/js/plugins.js"></script>

<!-- Google Analytics -->
<script>
  var _gaq=[['_setAccount','UA-44927419-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

