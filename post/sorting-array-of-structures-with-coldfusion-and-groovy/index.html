<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Adam.Blog()</title>
        <meta name="author">
        <meta name="description" content="I&#39;m bringin&#39; nerdy back">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.16-DEV" />
          <link href="http://adampresley.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Adam.Blog()" />
          <link href="http://adampresley.com/post/index.xml" rel="feed" type="application/rss+xml" title="Adam.Blog()" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://adampresley.com/css/styles.css">
        <link rel="icon" href="http://adampresley.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://adampresley.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://adampresley.com/css/highlightjs/monokai.css">
        <script src="http://adampresley.com/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://adampresley.com/assets/images/code-background-screenshot.png);
        }}
       .site-header {
         background: #2a373d url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Adam.Blog()</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://adampresley.com/" title="">&laquo; </a>
            
<h1><a href="http://adampresley.com/post/sorting-array-of-structures-with-coldfusion-and-groovy/" title="Sorting Array of Structures with ColdFusion and Groovy">Sorting Array of Structures with ColdFusion and Groovy</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2009.10.25">2009.10.25</time>

    &middot; 
        
        <a href="http://adampresley.com/tags/development">development</a>, 
        
        <a href="http://adampresley.com/tags/groovy">groovy</a>, 
        
        <a href="http://adampresley.com/tags/coldfusion">coldfusion</a>, 
        
        <a href="http://adampresley.com/tags/java">java</a>
        
    

</span>
</footer>

            <p><img src="http://s3.amazonaws.com/www.adampresley.com/posts/javabookcollection.jpeg" class="pull-right" style="margin-bottom: 10px; margin-left: 10px;" />
Today I had to work on a bit of code that dealt
with trying to tie in merchandising promotions against a shopping cart.
This code I&rsquo;m working with is pretty old, so it&rsquo;s kind of like trying to
make a paper airplane out of the Constitution. :/ My boss is working on
one part of this, and I another, and we have decided we need to at least
restructure the cart, which is a simple array of structures, a little
bit so he can do what he needs with it. Long story short the changes we
needed required me to be able to sort the cart. Being the nerd that I am
I took a quick peek into the Java side of things, and found that the
Collections classes had something to offer.</p>

<p>The first item that I took note of was the <a href="http://java.sun.com/javase/6/docs/api/java/util/Comparator.html">java.util.Comparator</a>
interface. After a little searching I came across a couple of code
samples that indicated how it worked. The interface allows you to create
your own class that implements a custom sorting mechanism that can be
used by the <em>sort()</em> method in the <a href="http://java.sun.com/javase/6/docs/api/java/util/Collections.html">java.util.Collection</a>
class. This class you create must implement a single method, compare, that takes two
items as arguments. The arguments are two values that are being
compared, and you must return an integer of -1, 0, or 1 to indicate
&ldquo;less than&rdquo;, &ldquo;equal&rdquo;, or &ldquo;greater than&rdquo; to describe the relationship
between the two items. The type of the items being compared are defined
in the class implementation and arguments, as the Comparator interface
uses generics.</p>

<p>So in my example I wish to sort this array of products, each product
being a structure, by product ID first, and then if the product IDs
match, then by price. Here is what an example of the array would look
like.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>unsorted = [
	{
		productId = 3,
		title = &quot;Widget ##3&quot;,
		price = 4.95,
		discounted = true
	},
	{
		productId = 1,
		title = &quot;Widget ##1&quot;,
		price = 10.95,
		discounted = false
	},
	{
		productId = 2,
		title = &quot;Widget ##2&quot;,
		price = 11.95
	},
	{
		productId = 3,
		title = &quot;Widget ##3&quot;,
		price = 5.95,
		discounted = false
	}
];
</pre></div>


<p>Notice how our items are out of order (based on product ID and price),
and that we have two items with the productId of 3, but differing
prices. Let&rsquo;s look at how the comparator class would look.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f92672">import</span> <span style="color: #f8f8f2">java.util.*</span><span style="color: #f92672">;</span>

<span style="color: #75715e">/*</span>
<span style="color: #75715e"> * Create a class that implements the java.util.Comparator interface.</span>
<span style="color: #75715e"> * This requires that we implement a single function named &quot;compare&quot;</span>
<span style="color: #75715e"> * that takes two items, and returns if the first if before, after,</span>
<span style="color: #75715e"> * or the same as the second item.</span>
<span style="color: #75715e"> *</span>
<span style="color: #75715e"> * In our case we will compare productId first. If they are the same</span>
<span style="color: #75715e"> * then we wanted to compare the prices.</span>
<span style="color: #75715e"> */</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">ProductComparator</span> <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">Comparator</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">coldfusion</span><span style="color: #f92672">.</span><span style="color: #a6e22e">runtime</span><span style="color: #f92672">.</span><span style="color: #a6e22e">Struct</span><span style="color: #f92672">&gt;</span> <span style="color: #f92672">{</span>
	<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">int</span> <span style="color: #a6e22e">compare</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">coldfusion</span><span style="color: #f92672">.</span><span style="color: #a6e22e">runtime</span><span style="color: #f92672">.</span><span style="color: #a6e22e">Struct</span> <span style="color: #f8f8f2">value1</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">coldfusion</span><span style="color: #f92672">.</span><span style="color: #a6e22e">runtime</span><span style="color: #f92672">.</span><span style="color: #a6e22e">Struct</span> <span style="color: #f8f8f2">value2</span><span style="color: #f92672">)</span> <span style="color: #f92672">{</span>
		<span style="color: #66d9ef">double</span> <span style="color: #f8f8f2">price1</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">value1</span><span style="color: #f92672">.</span><span style="color: #a6e22e">PRICE</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toDouble</span><span style="color: #f92672">();</span>
		<span style="color: #66d9ef">double</span> <span style="color: #f8f8f2">price2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">value2</span><span style="color: #f92672">.</span><span style="color: #a6e22e">PRICE</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toDouble</span><span style="color: #f92672">();</span>

		<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">productId1</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">value1</span><span style="color: #f92672">.</span><span style="color: #a6e22e">PRODUCTID</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toDouble</span><span style="color: #f92672">();</span>
		<span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">productId2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">value2</span><span style="color: #f92672">.</span><span style="color: #a6e22e">PRODUCTID</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toDouble</span><span style="color: #f92672">();</span>

		<span style="color: #66d9ef">if</span> <span style="color: #f92672">(</span><span style="color: #f8f8f2">productId1</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">productId2</span><span style="color: #f92672">)</span>
			<span style="color: #66d9ef">return</span> <span style="color: #ae81ff">1</span><span style="color: #f92672">;</span>
		<span style="color: #66d9ef">else</span> <span style="color: #66d9ef">if</span> <span style="color: #f92672">(</span><span style="color: #f8f8f2">productId1</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">productId2</span><span style="color: #f92672">)</span>
			<span style="color: #66d9ef">return</span> <span style="color: #f92672">-</span><span style="color: #ae81ff">1</span><span style="color: #f92672">;</span>
		<span style="color: #66d9ef">else</span> <span style="color: #f92672">{</span>
			<span style="color: #66d9ef">if</span> <span style="color: #f92672">(</span><span style="color: #f8f8f2">price1</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">price2</span><span style="color: #f92672">)</span>
				<span style="color: #66d9ef">return</span> <span style="color: #ae81ff">1</span><span style="color: #f92672">;</span>
			<span style="color: #66d9ef">else</span> <span style="color: #66d9ef">if</span> <span style="color: #f92672">(</span><span style="color: #f8f8f2">price1</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">price2</span><span style="color: #f92672">)</span>
				<span style="color: #66d9ef">return</span> <span style="color: #f92672">-</span><span style="color: #ae81ff">1</span><span style="color: #f92672">;</span>
			<span style="color: #66d9ef">else</span>
				<span style="color: #66d9ef">return</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">;</span>
		<span style="color: #f92672">}</span>
	<span style="color: #f92672">}</span>
<span style="color: #f92672">}</span>
</pre></div>


<p>The first thing of interest is the class definition. Notice how we
implement the Comparator interface. You&rsquo;ll also see those weird
brackets, followed by a reference to some type of ColdFusion class. This
is a Java generic. This states that the Comparator we are implementing
will have values in it of type &ldquo;coldfusion.runtime.Struct&rdquo;. This class
is ColdFusion&rsquo;s structure implementation under the hood. Also notice our
compare method takes two arguments, both of type
<strong>coldfusion.runtime.Struct</strong>.</p>

<p>The method does a quick conversion of the values because I&rsquo;ve found
ColdFusion has a bad habit of type-casting my values as strings. From
here we compare the two product IDs. If the first product ID is greater
than the second, we return 1. If it is less than the second we return
-1. If they are equal, however, we then want to do the same set of
comparisons to the price field. These return values allow the sorting
code to determine which out of two items should go after the other.</p>

<p>The use of this comparator requires that we get a Collections object and
call the sort method, passing in the array to sort, and the comparator.</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>variables.collectionObject = createObject(&quot;java&quot;, &quot;java.util.Collections&quot;);
variables.collectionObject.sort(someArray, variables.comparator);
</pre></div>
</p>

<p>Let&rsquo;s take a look at the two pieces of code. The first is a CFC that
creates our sorter component. We will use Groovy to create the Java
class dynamically. The second is a test page that uses it. Happy
coding!!</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&lt;cfcomponent&gt;</span>

	<span style="color: #f8f8f2">&lt;cffunction</span> <span style="color: #f8f8f2">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;init&quot;</span> <span style="color: #f8f8f2">returntype</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;productSorter&quot;</span> <span style="color: #f8f8f2">access</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;public&quot;</span> <span style="color: #f8f8f2">output</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;false&quot;</span><span style="color: #f8f8f2">&gt;</span>
		<span style="color: #f8f8f2">&lt;cfscript&gt;</span>
			<span style="color: #66d9ef">variables</span><span style="color: #f8f8f2">.collectionObject</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">createObject</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;java&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;java.util.Collections&quot;</span><span style="color: #f8f8f2">);</span>
			<span style="color: #66d9ef">variables</span><span style="color: #f8f8f2">.comparator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">__getComparator</span><span style="color: #f8f8f2">();</span>

			<span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
		<span style="color: #f8f8f2">&lt;/cfscript&gt;</span>
	<span style="color: #f8f8f2">&lt;/cffunction&gt;</span>

	<span style="color: #f8f8f2">&lt;cffunction</span> <span style="color: #f8f8f2">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;Sort&quot;</span> <span style="color: #f8f8f2">returntype</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;array&quot;</span> <span style="color: #f8f8f2">access</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;public&quot;</span> <span style="color: #f8f8f2">output</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;false&quot;</span><span style="color: #f8f8f2">&gt;</span>
		<span style="color: #f8f8f2">&lt;cfargument</span> <span style="color: #f8f8f2">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;productArray&quot;</span> <span style="color: #f8f8f2">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;array&quot;</span> <span style="color: #66d9ef">required</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;true&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

		<span style="color: #f8f8f2">&lt;cfscript&gt;</span>
			<span style="color: #66d9ef">var</span> <span style="color: #f8f8f2">result</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">duplicate</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">arguments</span><span style="color: #f8f8f2">.productArray);</span>

			<span style="color: #66d9ef">variables</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">collectionObject.sort</span><span style="color: #f8f8f2">(result,</span> <span style="color: #66d9ef">variables</span><span style="color: #f8f8f2">.comparator);</span>
			<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">result;</span>
		<span style="color: #f8f8f2">&lt;/cfscript&gt;</span>
	<span style="color: #f8f8f2">&lt;/cffunction&gt;</span>

	<span style="color: #f8f8f2">&lt;cffunction</span> <span style="color: #f8f8f2">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;__getComparator&quot;</span> <span style="color: #f8f8f2">returntype</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;any&quot;</span> <span style="color: #f8f8f2">access</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;private&quot;</span> <span style="color: #f8f8f2">output</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;false&quot;</span><span style="color: #f8f8f2">&gt;</span>
		<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">cfimport</span> <span style="color: #a6e22e">prefix</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;g&quot;</span> <span style="color: #a6e22e">taglib</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;/groovy&quot;</span> <span style="color: #f8f8f2">/&gt;</span>

		<span style="color: #f8f8f2">&lt;cfset</span> <span style="color: #66d9ef">arguments</span><span style="color: #f8f8f2">.object</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>

		<span style="color: #f8f8f2">&lt;cfoutput&gt;</span>
		<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">g:script</span> <span style="color: #a6e22e">args</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;#arguments#&quot;</span><span style="color: #f8f8f2">&gt;</span>

			import java.util.*;

			/*
			 * Create a class that implements the java.util.Comparator interface.
			 * This requires that we implement a single function named &quot;compare&quot;
			 * that takes two items, and returns if the first if before, after,
			 * or the same as the second item.
			 *
			 * In our case we will compare productId first. If they are the same
			 * then we wanted to compare the prices.
			 */
			public class ProductComparator implements Comparator<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">coldfusion.runtime.Struct</span><span style="color: #f8f8f2">&gt;</span> {
				public int compare(coldfusion.runtime.Struct value1, coldfusion.runtime.Struct value2) {
					double price1 = value1.PRICE.toDouble();
					double price2 = value2.PRICE.toDouble();

					int productId1 = value1.PRODUCTID.toDouble();
					int productId2 = value2.PRODUCTID.toDouble();

					if (productId1 &gt; productId2)
						return 1;
					else if (productId1 <span style="color: #f8f8f2">&lt;</span> <span style="color: #f92672">productId2</span><span style="color: #960050; background-color: #1e0010">)</span>
						<span style="color: #a6e22e">return</span> <span style="color: #a6e22e">-1</span><span style="color: #960050; background-color: #1e0010">;</span>
					<span style="color: #a6e22e">else</span> <span style="color: #960050; background-color: #1e0010">{</span>
						<span style="color: #a6e22e">if</span> <span style="color: #960050; background-color: #1e0010">(</span><span style="color: #a6e22e">price1</span> <span style="color: #f8f8f2">&gt;</span> price2)
							return 1;
						else if (price1 <span style="color: #f8f8f2">&lt;</span> <span style="color: #f92672">price2</span><span style="color: #960050; background-color: #1e0010">)</span>
							<span style="color: #a6e22e">return</span> <span style="color: #a6e22e">-1</span><span style="color: #960050; background-color: #1e0010">;</span>
						<span style="color: #a6e22e">else</span>
							<span style="color: #a6e22e">return</span> <span style="color: #a6e22e">0</span><span style="color: #960050; background-color: #1e0010">;</span>
					<span style="color: #960050; background-color: #1e0010">}</span>
				<span style="color: #960050; background-color: #1e0010">}</span>
			<span style="color: #960050; background-color: #1e0010">}</span>

			<span style="color: #a6e22e">arguments</span><span style="color: #960050; background-color: #1e0010">.</span><span style="color: #a6e22e">object </span><span style="color: #f92672">=</span> <span style="color: #e6db74">new</span> <span style="color: #a6e22e">ProductComparator</span><span style="color: #960050; background-color: #1e0010">();</span>

		<span style="color: #960050; background-color: #1e0010">&lt;/</span><span style="color: #a6e22e">g:script</span><span style="color: #f8f8f2">&gt;</span>
		<span style="color: #f8f8f2">&lt;/cfoutput&gt;</span>

		<span style="color: #f8f8f2">&lt;cfreturn</span> <span style="color: #66d9ef">arguments</span><span style="color: #f8f8f2">.object</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
	<span style="color: #f8f8f2">&lt;/cffunction&gt;</span>

<span style="color: #f8f8f2">&lt;/cfcomponent&gt;</span>
</pre></div>
</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&lt;cfscript&gt;</span>

<span style="color: #f8f8f2">productSorter</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">createObject</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;component&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;productSorter&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">init</span><span style="color: #f8f8f2">();</span>

<span style="color: #f8f8f2">unsorted</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">productId</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">title</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Widget ##3&quot;</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">price</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">4</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">95</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">discounted</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">true</span>
	<span style="color: #f8f8f2">},</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">productId</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">title</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Widget ##1&quot;</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">price</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">10</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">95</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">discounted</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">false</span>
	<span style="color: #f8f8f2">},</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">productId</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">title</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Widget ##2&quot;</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">price</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">11</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">95</span>
	<span style="color: #f8f8f2">},</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">productId</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">title</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Widget ##3&quot;</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">price</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">95</span><span style="color: #f8f8f2">,</span>
		<span style="color: #f8f8f2">discounted</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">false</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">];</span>

<span style="color: #f8f8f2">sorted</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">productSorter.Sort</span><span style="color: #f8f8f2">(unsorted);</span>

<span style="color: #f8f8f2">&lt;/cfscript&gt;</span>

<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">p</span><span style="color: #f8f8f2">&gt;</span>
	This page demonstrates using Groovy to create a custom comparator used to sort
	an array of structures. In this example we will have an array of products. We
	wish to sort these products by productId first, and if the productId matches,
	we will then sort by price.
<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">p</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">fieldset</span> <span style="color: #a6e22e">style</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;padding: 10px; margin-bottom: 15px;&quot;</span><span style="color: #f8f8f2">&gt;</span>
	<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">legend</span><span style="color: #f8f8f2">&gt;</span>Unsorted Array of Products<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">legend</span><span style="color: #f8f8f2">&gt;</span>

	<span style="color: #f8f8f2">&lt;cfdump</span> <span style="color: #66d9ef">var</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;#unsorted#&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">fieldset</span><span style="color: #f8f8f2">&gt;</span>

<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">fieldset</span> <span style="color: #a6e22e">style</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;padding: 10px; margin-bottom: 15px;&quot;</span><span style="color: #f8f8f2">&gt;</span>
	<span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">legend</span><span style="color: #f8f8f2">&gt;</span>Sorted Array of Products<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">legend</span><span style="color: #f8f8f2">&gt;</span>

	<span style="color: #f8f8f2">&lt;cfdump</span> <span style="color: #66d9ef">var</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;#sorted#&quot;</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">fieldset</span><span style="color: #f8f8f2">&gt;</span>
</pre></div>
</p>

<p><strong>UPDATE</strong> (11/13/2009):
See &lt;#post/2009/11/sorting-array-of-structures-with-only-coldfusion/522a996b6851e13e760cd12b&gt;
for a demonstration of sorting an array of structures without Groovy,
and in pure ColdFusion.</p>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fadampresley.com%2fpost%2fsorting-array-of-structures-with-coldfusion-and-groovy%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Sorting%20Array%20of%20Structures%20with%20ColdFusion%20and%20Groovy&amp;url=http%3a%2f%2fadampresley.com%2fpost%2fsorting-array-of-structures-with-coldfusion-and-groovy%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fadampresley.com%2fpost%2fsorting-array-of-structures-with-coldfusion-and-groovy%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fadampresley.com%2fpost%2fsorting-array-of-structures-with-coldfusion-and-groovy%2f&title=Sorting%20Array%20of%20Structures%20with%20ColdFusion%20and%20Groovy" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'adampresleyblog';
    var disqus_identifier = 'http:\/\/adampresley.com\/post\/sorting-array-of-structures-with-coldfusion-and-groovy\/';
    var disqus_title = 'Sorting Array of Structures with ColdFusion and Groovy';
    var disqus_url = 'http:\/\/adampresley.com\/post\/sorting-array-of-structures-with-coldfusion-and-groovy\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="http://adampresley.com/assets/adampresley/images/adam-bowtie.png" alt="Adam Presley" />
  <p class="name"> 
  <strong>Adam Presley</strong></p>
  <p class="address">Texas, USA</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/adampresley" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/adampresley" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://adampresley.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://adampresley.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2016 &middot; Adam Presley. All Rights Reserved. Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/adampresley.com\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://adampresley.com/js/plugins.js"></script>

<!-- Google Analytics -->
<script>
  var _gaq=[['_setAccount','UA-44927419-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

