<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Adam.Blog()</title>
        <meta name="author">
        <meta name="description" content="I&#39;m bringin&#39; nerdy back">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.16-DEV" />
          <link href="http://adampresley.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Adam.Blog()" />
          <link href="http://adampresley.com/post/index.xml" rel="feed" type="application/rss+xml" title="Adam.Blog()" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://adampresley.com/css/styles.css">
        <link rel="icon" href="http://adampresley.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://adampresley.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://adampresley.com/css/highlightjs/monokai.css">
        <script src="http://adampresley.com/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://adampresley.com/assets/images/code-background-screenshot.png);
        }}
       .site-header {
         background: #2a373d url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Adam.Blog()</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://adampresley.com/" title="">&laquo; </a>
            
<h1><a href="http://adampresley.com/post/rekindling-my-love-affair-with-c-part-1/" title="Rekindling My Love Affair with C&#43;&#43;, part 1">Rekindling My Love Affair with C&#43;&#43;, part 1</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2012.04.11">2012.04.11</time>

    &middot; 
        
        <a href="http://adampresley.com/tags/development">development</a>, 
        
        <a href="http://adampresley.com/tags/c">c&#43;&#43;</a>
        
    

</span>
</footer>

            <p>Yesterday I was reading various articles online and stumbled across
<a href="http://0x10c.com/">0x10c.com</a>. Although I won&rsquo;t go into any details of
that project (you&rsquo;ll just have to click to see) it did make me slightly
nostalgic for one of the first languages I learned, C/C++. I happen to be
one of those types that when trying a new language or product I look for a
small project to get my feet wet. Only this time I wanted to reacquaint myself
with an old friend. So I decided I would take my MailSlurper project,
written in Java, and convert it to C++. This is clearly not the simplest
thing I could have picked but it is familiar and sounds fun. Last night
I began the conversion.</p>

<p>For step one I decided to address the configuration file that allows the user to specify the host,
port and other information used to configure how the MailSlurper
application runs. Immediately it occurs to me that I have forgotten much
of the <strong>detail</strong> behind how to do some things in C++. For example I had
forgotten the syntax for defining a class in a header file and the
implementation in a CPP file. The end result looks like this:</p>

<p><strong>IniParser.h</strong></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#ifndef __INI_PARSER_H__</span>

<span style="color: #75715e">#define __INI_PARSER_H__ 1</span>

<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;stdio.h&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;string.h&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;iostream&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;iomanip&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;map&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;fstream&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;string&gt;</span>

<span style="color: #66d9ef">using</span> <span style="color: #66d9ef">namespace</span> <span style="color: #f8f8f2">std;</span>

<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">IniParser</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">private</span><span style="color: #f92672">:</span>
		<span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">__filename;</span>
		<span style="color: #f8f8f2">map</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">string,</span> <span style="color: #f8f8f2">string</span><span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">__kvp;</span>
		<span style="color: #f8f8f2">ifstream</span> <span style="color: #f8f8f2">__fp;</span>

		<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">__openFile</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename);</span>
		<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">__closeFile</span><span style="color: #f8f8f2">();</span>
		<span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">__readLine</span><span style="color: #f8f8f2">();</span>

	<span style="color: #66d9ef">public</span><span style="color: #f92672">:</span>
		<span style="color: #f8f8f2">IniParser(</span><span style="color: #66d9ef">const</span> <span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename);</span>
		<span style="color: #f92672">~</span><span style="color: #f8f8f2">IniParser();</span>

		<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">parseFile</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename);</span>
		<span style="color: #f8f8f2">string</span> <span style="color: #a6e22e">getValue</span><span style="color: #f8f8f2">(string</span> <span style="color: #f8f8f2">key);</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #75715e">#endif</span>
</pre></div>


<p><strong>IniParser.cpp</strong></p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#include</span> <span style="color: #75715e">&quot;IniParser.h&quot;</span>

<span style="color: #66d9ef">void</span> <span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">__openFile(</span><span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">__fp.open(filename);</span>

	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #f8f8f2">__fp)</span> <span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">cerr</span> <span style="color: #f92672">&lt;&lt;</span> <span style="color: #e6db74">&quot;Can&#39;t open file.&quot;</span><span style="color: #f8f8f2">;</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">void</span> <span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">__closeFile()</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">__fp.close();</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">__readLine()</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">line</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #66d9ef">char</span><span style="color: #f8f8f2">[</span><span style="color: #ae81ff">255</span><span style="color: #f8f8f2">];</span>
	<span style="color: #f8f8f2">__fp</span> <span style="color: #f92672">&gt;&gt;</span> <span style="color: #f8f8f2">line;</span>
	<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">line;</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">IniParser(</span><span style="color: #66d9ef">const</span> <span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">__filename</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #66d9ef">char</span><span style="color: #f8f8f2">[</span><span style="color: #ae81ff">512</span><span style="color: #f8f8f2">];</span>
	<span style="color: #f8f8f2">strcpy(__filename,</span> <span style="color: #f8f8f2">filename);</span>
	<span style="color: #f8f8f2">parseFile(__filename);</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::~</span><span style="color: #f8f8f2">IniParser()</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">delete</span> <span style="color: #f8f8f2">__filename;</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">void</span> <span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">parseFile(</span><span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">filename)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">char</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">line;</span>
	<span style="color: #f8f8f2">string</span> <span style="color: #f8f8f2">key,</span> <span style="color: #f8f8f2">value;</span>

	<span style="color: #f8f8f2">__kvp.clear();</span>
	<span style="color: #f8f8f2">__openFile(filename);</span>

	<span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">(strlen(line</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">__readLine()))</span> <span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">key</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">string(strtok(line,</span> <span style="color: #e6db74">&quot;=&quot;</span><span style="color: #f8f8f2">));</span>
		<span style="color: #f8f8f2">value</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">string(strtok(NULL,</span> <span style="color: #e6db74">&quot;=&quot;</span><span style="color: #f8f8f2">));</span>

		<span style="color: #f8f8f2">printf(</span><span style="color: #e6db74">&quot;key = %s, value = %s</span><span style="color: #ae81ff">\n</span><span style="color: #e6db74">&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">key.c_str(),</span> <span style="color: #f8f8f2">value.c_str());</span>
		<span style="color: #f8f8f2">__kvp[key]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">value;</span>
	<span style="color: #f8f8f2">}</span>

	<span style="color: #f8f8f2">__closeFile();</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">string</span> <span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">getValue(string</span> <span style="color: #f8f8f2">key)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">__kvp[key];</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</p>

<p><strong>Main.cpp</strong></p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#include</span> <span style="color: #75715e">&lt;string&gt;</span>
<span style="color: #75715e">#include</span> <span style="color: #75715e">&quot;IniParser/IniParser.h&quot;</span>

<span style="color: #66d9ef">using</span> <span style="color: #66d9ef">namespace</span> <span style="color: #f8f8f2">std;</span>

<span style="color: #66d9ef">int</span> <span style="color: #a6e22e">main</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">void</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">IniParser</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">parser</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">IniParser(</span><span style="color: #e6db74">&quot;properties.ini&quot;</span><span style="color: #f8f8f2">);</span>
	<span style="color: #f8f8f2">string</span> <span style="color: #f8f8f2">host,</span> <span style="color: #f8f8f2">port;</span>

	<span style="color: #f8f8f2">host</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parser</span><span style="color: #f92672">-&gt;</span><span style="color: #f8f8f2">getValue(</span><span style="color: #e6db74">&quot;host&quot;</span><span style="color: #f8f8f2">);</span>
	<span style="color: #f8f8f2">port</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parser</span><span style="color: #f92672">-&gt;</span><span style="color: #f8f8f2">getValue(</span><span style="color: #e6db74">&quot;port&quot;</span><span style="color: #f8f8f2">);</span>
	<span style="color: #f8f8f2">printf(</span><span style="color: #e6db74">&quot;%s @ %s</span><span style="color: #ae81ff">\n</span><span style="color: #e6db74">&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">host.c_str(),</span> <span style="color: #f8f8f2">port.c_str());</span>

	<span style="color: #66d9ef">delete</span> <span style="color: #f8f8f2">parser;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</p>

<p>There are two things I am reminded of after doing this part:</p>

<ol>
<li>How much functionality and boilerplate stuff higher level languages
do for you</li>
<li>How much control you <strong>don&rsquo;t</strong> have in higher languages</li>
</ol>

<p>Stay tuned for the next part!</p>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fadampresley.com%2fpost%2frekindling-my-love-affair-with-c-part-1%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Rekindling%20My%20Love%20Affair%20with%20C%2b%2b%2c%20part%201&amp;url=http%3a%2f%2fadampresley.com%2fpost%2frekindling-my-love-affair-with-c-part-1%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fadampresley.com%2fpost%2frekindling-my-love-affair-with-c-part-1%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fadampresley.com%2fpost%2frekindling-my-love-affair-with-c-part-1%2f&title=Rekindling%20My%20Love%20Affair%20with%20C%2b%2b%2c%20part%201" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'adampresleyblog';
    var disqus_identifier = 'http:\/\/adampresley.com\/post\/rekindling-my-love-affair-with-c-part-1\/';
    var disqus_title = 'Rekindling My Love Affair with C\x2b\x2b, part 1';
    var disqus_url = 'http:\/\/adampresley.com\/post\/rekindling-my-love-affair-with-c-part-1\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="http://adampresley.com/assets/adampresley/images/adam-bowtie.png" alt="Adam Presley" />
  <p class="name"> 
  <strong>Adam Presley</strong></p>
  <p class="address">Texas, USA</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/adampresley" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/adampresley" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://adampresley.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://adampresley.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2016 &middot; Adam Presley. All Rights Reserved. Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/adampresley.com\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://adampresley.com/js/plugins.js"></script>

<!-- Google Analytics -->
<script>
  var _gaq=[['_setAccount','UA-44927419-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

