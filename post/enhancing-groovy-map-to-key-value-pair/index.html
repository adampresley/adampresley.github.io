<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Adam.Blog()</title>
        <meta name="author">
        <meta name="description" content="I&#39;m bringin&#39; nerdy back">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.16-DEV" />
          <link href="http://adampresley.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Adam.Blog()" />
          <link href="http://adampresley.com/post/index.xml" rel="feed" type="application/rss+xml" title="Adam.Blog()" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://adampresley.com/css/styles.css">
        <link rel="icon" href="http://adampresley.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://adampresley.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://adampresley.com/css/highlightjs/monokai.css">
        <script src="http://adampresley.com/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://adampresley.com/assets/images/code-background-screenshot.png);
        }}
       .site-header {
         background: #2a373d url(http://adampresley.com/assets/images/code-background-screenshot.png) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Adam.Blog()</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://adampresley.com/" title="">&laquo; </a>
            
<h1><a href="http://adampresley.com/post/enhancing-groovy-map-to-key-value-pair/" title="Enhancing Groovy - Map to Key-Value Pair">Enhancing Groovy - Map to Key-Value Pair</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2010.11.30">2010.11.30</time>

    &middot; 
        
        <a href="http://adampresley.com/tags/development">development</a>, 
        
        <a href="http://adampresley.com/tags/groovy">groovy</a>
        
    

</span>
</footer>

            <p>Here is another example of using Groovy&rsquo;s metaClass abilities to extend
the language. In this scenario I have a need to convert a standard
<strong>Map</strong> to a key-value pair, such as what would be used in an HTTP
POST. Continuing from my previous post about extending <strong>String</strong> to
have the ability to URL encode itself, we will now extend <strong>Map</strong> to
transform itself to a key-value pair. Paste this in your Groovy Console
and give it a try.</p>

<p><strong>Edit:</strong> Thanks to Tim Yates for bringing up the <em>join()</em>
command. Made it a lot cleaner!</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">String</span><span style="color: #f92672">.</span><span style="color: #a6e22e">metaClass</span><span style="color: #f92672">.</span><span style="color: #a6e22e">encodeURL</span> <span style="color: #f92672">=</span> <span style="color: #f92672">{</span>
	<span style="color: #f8f8f2">java</span><span style="color: #f92672">.</span><span style="color: #a6e22e">net</span><span style="color: #f92672">.</span><span style="color: #a6e22e">URLEncoder</span><span style="color: #f92672">.</span><span style="color: #a6e22e">encode</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">delegate</span><span style="color: #f92672">)</span>
<span style="color: #f92672">}</span>

<span style="color: #f8f8f2">Map</span><span style="color: #f92672">.</span><span style="color: #a6e22e">metaClass</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toKeyValuePair</span> <span style="color: #f92672">=</span> <span style="color: #f92672">{</span>
	<span style="color: #f8f8f2">delegate</span><span style="color: #f92672">.</span><span style="color: #a6e22e">collect</span> <span style="color: #f92672">{</span> <span style="color: #f8f8f2">key</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">value</span> <span style="color: #f92672">-&gt;</span>
		<span style="color: #e6db74">&quot;${key.encodeURL()}=${value.toString().encodeURL()}&quot;</span>
	<span style="color: #f92672">}.</span><span style="color: #a6e22e">join</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;&amp;&quot;</span><span style="color: #f92672">)</span>
<span style="color: #f92672">}</span>

<span style="color: #66d9ef">def</span> <span style="color: #f8f8f2">sourceMap</span> <span style="color: #f92672">=</span> <span style="color: #f92672">[</span>
	<span style="color: #f8f8f2">a:</span> <span style="color: #e6db74">&quot;123&quot;</span><span style="color: #f92672">,</span>
	<span style="color: #f8f8f2">b:</span> <span style="color: #e6db74">&quot;This is a test&quot;</span><span style="color: #f92672">,</span>
	<span style="color: #f8f8f2">c:</span> <span style="color: #e6db74">&quot;I_have 20% coverage of this &amp; I want *lots* more.&quot;</span><span style="color: #f92672">,</span>
	<span style="color: #f8f8f2">d:</span> <span style="color: #e6db74">&quot;Whatever!&quot;</span>
<span style="color: #f92672">]</span>

<span style="color: #f8f8f2">sourceMap</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toKeyValuePair</span><span style="color: #f92672">()</span>
</pre></div>


<p>And with that simple extension we can now easily convert a <strong>Map</strong>
to a key-value pair string. The astute among you may have noticed that
the value being added to the result string is using <strong>toString()</strong>,
and that is the value of the key is not a string you may get an object
address, or other such wonderfulness. True enough this method is
limited, and could probably be enhanced to be more sophisticated, but
that is for another time. Happy coding!</p>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fadampresley.com%2fpost%2fenhancing-groovy-map-to-key-value-pair%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Enhancing%20Groovy%20-%20Map%20to%20Key-Value%20Pair&amp;url=http%3a%2f%2fadampresley.com%2fpost%2fenhancing-groovy-map-to-key-value-pair%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fadampresley.com%2fpost%2fenhancing-groovy-map-to-key-value-pair%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fadampresley.com%2fpost%2fenhancing-groovy-map-to-key-value-pair%2f&title=Enhancing%20Groovy%20-%20Map%20to%20Key-Value%20Pair" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'adampresleyblog';
    var disqus_identifier = 'http:\/\/adampresley.com\/post\/enhancing-groovy-map-to-key-value-pair\/';
    var disqus_title = 'Enhancing Groovy - Map to Key-Value Pair';
    var disqus_url = 'http:\/\/adampresley.com\/post\/enhancing-groovy-map-to-key-value-pair\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="http://adampresley.com/assets/adampresley/images/adam-bowtie.png" alt="Adam Presley" />
  <p class="name"> 
  <strong>Adam Presley</strong></p>
  <p class="address">Texas, USA</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/adampresley" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/adampresley" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://adampresley.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://adampresley.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2016 &middot; Adam Presley. All Rights Reserved. Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/adampresley.com\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://adampresley.com/js/plugins.js"></script>

<!-- Google Analytics -->
<script>
  var _gaq=[['_setAccount','UA-44927419-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

